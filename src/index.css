@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base layer: global typography, surfaces, and smoothing */
@layer base {
  html, body, #root {
    height: 100%;
  }
  html {
    color-scheme: dark;
  }
  body {
    @apply bg-surface-base text-text-primary font-mono;
    margin: 0;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  a {
    @apply text-neon-blue;
  }
  a:hover {
    color: #FF2AD1; /* neon pink */
  }
}

/* CRT-style flicker */
@keyframes crt-flicker {
  0%, 100% { opacity: 0.97 }
  50% { opacity: 1 }
}
.crt {
  animation: crt-flicker 2500ms steps(100) infinite;
}

/* Simple glitch jiggle (used sparingly for hover) */
@keyframes glitch-jitter {
  0% { transform: translate(0,0) }
  20% { transform: translate(-1px, 1px) }
  40% { transform: translate(1px, -1px) }
  60% { transform: translate(-1px, -1px) }
  80% { transform: translate(1px, 1px) }
  100% { transform: translate(0,0) }
}

/* Scanline overlay: place on a fixed element filling the viewport */
.scanlines::before {
  content: "";
  position: absolute;
  inset: 0;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,0.04) 0px,
    rgba(255,255,255,0.04) 1px,
    transparent 2px,
    transparent 3px
  );
  pointer-events: none;
}

/* Hover glitch helper
.glitch-hover:hover {
  text-shadow:
    0 0 2px #39FF14,
    0 0 8px #39FF14,
    2px 0 #FF2AD1,
    -2px 0 #00E5FF;
  filter: saturate(1.25) contrast(1.1);
  animation: glitch-jitter 120ms steps(2) 1;
} */

/* Neon focus ring for keyboard nav */
.neon-focus:focus-visible {
  outline: 2px solid #00E5FF;
  box-shadow: 0 0 0 4px rgba(0,229,255,0.15);
}

/* Link helper */
.neon-link {
  transition: color 200ms, text-shadow 200ms, filter 200ms;
}
.neon-link:hover {
  color: #FF2AD1;
  text-shadow: 0 0 8px #FF2AD1;
}

/* Accessibility: prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .crt { animation: none }
  .glitch-hover { animation: none; text-shadow: none; filter: none }
}

/* ---- Terminal validation helpers ---- */
.term-error {
  color: #FF2AD1; /* neon-ish red/pink */
  text-shadow: 0 0 6px #FF2AD1, 0 0 18px #FF2AD1, 0 0 36px rgba(255, 42, 209, 0.35);
  filter: saturate(1.2) contrast(1.05);
}

.term-success {
  color: #39FF14; /* neon green */
  text-shadow: 0 0 8px #39FF14, 0 0 22px #39FF14, 0 0 48px rgba(57,255,20,0.35);
  animation: glitch-jitter 140ms steps(2) 6;
}

.term-type {
  display: inline-block;
  white-space: nowrap;
  overflow: hidden;
  border-right: 1ch solid rgba(230,241,255,0.5);
  /* typing effect with blinking caret */
  animation: typing 1200ms steps(30, end) 1, caret 900ms steps(1, end) infinite;
}

@keyframes typing {
  from { width: 0 }
  to { width: 100% }
}
@keyframes caret {
  50% { border-color: transparent }
}

/* Expand/reveal helper for ASCII clue after success */
.ascii-reveal {
  max-height: 0;
  opacity: 0;
  overflow: hidden;
  transition: max-height 500ms ease, opacity 500ms ease;
}
.ascii-reveal--open {
  max-height: 1000px; /* large enough for the art */
  opacity: 1;
}

/* Reduced motion safety */
@media (prefers-reduced-motion: reduce) {
  .term-type { animation: none; border-right: none }
  .term-success { animation: none }
}

/* one-shot glitch animation helper */
.glitch-once {
  animation: glitch-jitter 140ms steps(2) 4;
}
